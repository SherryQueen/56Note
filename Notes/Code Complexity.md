# Code Complexity

> #复杂度 #Complexity #圈复杂度 #点边计算法 #节点判定法 #优化 #Optimize

## 圈复杂度(条件复杂度)

- 衡量单个函数内的独立路径的条数.
- 复杂度越高,可测性越低,维护成本越高

| 复杂度  | 代码状况 | 可测性 | 维护成本 |
| ------- | -------- | ------ | -------- |
| 1 ~ 10  | 清晰     | 高     | 低       |
| 10 ~ 20 | 复杂     | 中     | 中       |
| 20 ~ 30 | 非常复杂 | 低     | 高       |
| 30 ~    | 不可读   | 不可测 | 非常高   |

## 计算方法

#### 点边计算法

- 绘制控制流程图

```js
// 复杂度 = 4 - 4 + 2 = 2
function(a) {
    if(a%2) console.info('odd') //
    else console.info('even')
}
```

![FlowChart](/Assets/202112061907.png)

- M = E - N + 2P
  - E 图中边的个数
  - N 图中节点的个数
  - P 图中连接组件的个数
  - 常见的复杂度
    - 正常顺序的圈复杂度为 1
    - if else 的圈复杂度为 2
    - while 的圈复杂度也为 2

#### 节点判定法

- V(G) = P + 1
  - P 判定节点数(常见判定节点如下)
    - if 语句
    - while 语句
    - for 语句
    - case 语句
    - catch 语句
    - and 和 or 布尔操作
    - ? : 三元运算符

## 如何降低复杂度

- 提取判断/循环函数
- 拆分大函数为小函数
- 简化条件判断
- 优化算法
